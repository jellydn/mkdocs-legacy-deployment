<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://typeorm-legacy.productsway.com/using-cli/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Using CLI - TypeORM 0.2.38</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Using CLI";
        var mkdocs_page_input_path = "using-cli.md";
        var mkdocs_page_url = "/using-cli/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> TypeORM 0.2.38
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Documentation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../active-record-data-mapper/">Active Record vs Data Mapper</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../caching/">Caching queries</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../connection-api/">Connection APIs</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../connection-options/">Connection Options</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../connection/">Working with Connection</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../custom-repository/">Custom repositories</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../decorator-reference/">Decorators reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../delete-query-builder/">Delete using Query Builder</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../eager-and-lazy-relations/">Eager and Lazy Relations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../embedded-entities/">Embedded Entities</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../entities/">Entities</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../entity-inheritance/">Entity Inheritance</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../entity-manager-api/">`EntityManager` API</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../entity-metadata/">Entity Metadata</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../example-with-express/">Example using TypeORM with Express</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../find-options/">Find Options</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../indices/">Indices</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../insert-query-builder/">Insert using Query Builder</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../internals/">Internals</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../listeners-and-subscribers/">Entity Listeners and Subscribers</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../logging/">Logging</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../many-to-many-relations/">Many-to-many relations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../many-to-one-one-to-many-relations/">Many-to-one / one-to-many relations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../migrations/">Migrations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mongodb/">MongoDB</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../multiple-connections/">Multiple connections, databases, schemas and replication setup</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../naming-strategy/">Naming strategy</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../one-to-one-relations/">One-to-one relations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../query-runner/">Working with Query Runner</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../relational-query-builder/">Working with Relations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../relations-faq/">Relations FAQ</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../relations/">Relations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../repository-api/">Repository APIs</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../roadmap/">Roadmap</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../select-query-builder/">Select using Query Builder</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../separating-entity-definition/">Separating Entity Definition</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../sequelize-migration/">Migration from Sequelize to TypeORM</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../support/">Support</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../supported-platforms/">Supported platforms</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../transactions/">Transactions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../tree-entities/">Tree Entities</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../update-query-builder/">Update using Query Builder</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../usage-with-javascript/">Using with JavaScript</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Using CLI</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#installing-cli">Installing CLI</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#if-entities-files-are-in-javascript">If entities files are in javascript</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#if-entities-files-are-in-typescript">If entities files are in typescript</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#how-to-read-the-documentation">How to read the documentation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#initialize-a-new-typeorm-project">Initialize a new TypeORM project</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#create-a-new-entity">Create a new entity</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#create-a-new-subscriber">Create a new subscriber</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#create-a-new-migration">Create a new migration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#generate-a-migration-from-existing-table-schema">Generate a migration from existing table schema</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#run-migrations">Run migrations</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#revert-migrations">Revert migrations</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#show-migrations">Show migrations</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#sync-database-schema">Sync database schema</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#log-sync-database-schema-queries-without-actual-running-them">Log sync database schema queries without actual running them</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#drop-database-schema">Drop database schema</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#run-any-sql-query">Run any sql query</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#clear-cache">Clear cache</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#check-version">Check version</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../using-ormconfig/">Using Configuration Sources</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../validation/">Using Validation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../view-entities/">View Entities</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../working-with-entity-manager/">What is EntityManager</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../working-with-repository/">What is Repository</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">TypeORM 0.2.38</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>Using CLI</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="using-cli">Using CLI</h1>
<ul>
<li><a href="#installing-cli">Installing CLI</a></li>
<li><a href="#initialize-a-new-typeorm-project">Initialize a new TypeORM project</a></li>
<li><a href="#create-a-new-entity">Create a new entity</a></li>
<li><a href="#create-a-new-subscriber">Create a new subscriber</a></li>
<li><a href="#create-a-new-migration">Create a new migration</a></li>
<li><a href="#generate-a-migration-from-existing-table-schema">Generate a migration from existing table schema</a></li>
<li><a href="#run-migrations">Run migrations</a></li>
<li><a href="#revert-migrations">Revert migrations</a></li>
<li><a href="#show-migrations">Show migrations</a></li>
<li><a href="#sync-database-schema">Sync database schema</a></li>
<li><a href="#log-sync-database-schema-queries-without-actual-running-them">Log sync database schema queries without actual running them</a></li>
<li><a href="#drop-database-schema">Drop database schema</a></li>
<li><a href="#run-any-sql-query">Run any sql query</a></li>
<li><a href="#clear-cache">Clear cache</a></li>
<li><a href="#check-version">Check version</a></li>
</ul>
<h2 id="installing-cli">Installing CLI</h2>
<h3 id="if-entities-files-are-in-javascript">If entities files are in javascript</h3>
<p>If you have a local typeorm version, make sure it matches the global version we are going to install.</p>
<p>Install typeorm globally with <code>npm i -g typeorm</code>.
You can also chose to use <code>npx typeorm &lt;params&gt;</code> for each command if you prefer not having to install it.</p>
<h3 id="if-entities-files-are-in-typescript">If entities files are in typescript</h3>
<p>This CLI tool is written in javascript and to be run on node. If your entity files are in typescript, you will need to transpile them to javascript before using CLI. You may skip this section if you only use javascript.</p>
<p>You may setup ts-node in your project to ease the operation as follows:</p>
<p>Install ts-node globally:</p>
<pre><code>npm install -g ts-node
</code></pre>
<p>Add typeorm command under scripts section in package.json</p>
<pre><code>&quot;scripts&quot;: {
    ...
    &quot;typeorm&quot;: &quot;node --require ts-node/register ./node_modules/typeorm/cli.js&quot;    
}
</code></pre>
<p>If you want to load more modules like <a href="https://github.com/ilearnio/module-alias">module-alias</a> you can add more <code>--require my-module-supporting-register</code></p>
<p>Then you may run the command like this:</p>
<pre><code>npm run typeorm migration:run
</code></pre>
<p>If you need to pass parameter with dash to npm script, you will need to add them after --. For example, if you need to <em>generate</em>, the command is like this:</p>
<pre><code>npm run typeorm migration:generate -- -n migrationNameHere
</code></pre>
<h3 id="how-to-read-the-documentation">How to read the documentation</h3>
<p>To reduce verbosity of the documentation, the following sections are using a globally installed typeorm CLI. Depending on how you installed the CLI, you may replace <code>typeorm</code> at the start of the command, by either <code>npx typeorm</code> or <code>npm run typeorm</code>.</p>
<h2 id="initialize-a-new-typeorm-project">Initialize a new TypeORM project</h2>
<p>You can create a new project with everything already setup:</p>
<pre><code>typeorm init
</code></pre>
<p>It creates all files needed for a basic project with TypeORM:</p>
<ul>
<li>.gitignore</li>
<li>package.json</li>
<li>README.md</li>
<li>tsconfig.json</li>
<li>ormconfig.json</li>
<li>src/entity/User.ts</li>
<li>src/index.ts</li>
</ul>
<p>Then you can run <code>npm install</code> to install all dependencies.
Once all dependencies are installed, you need to modify <code>ormconfig.json</code> and insert your own database settings.
After that, you can run your application by running <code>npm start</code>.</p>
<p>All files are generated in the current directory.
If you want to generate them in a special directory you can use <code>--name</code>: </p>
<pre><code>typeorm init --name my-project
</code></pre>
<p>To specify a specific database you use you can use <code>--database</code>:</p>
<pre><code>typeorm init --database mssql
</code></pre>
<p>You can also generate a base project with Express:</p>
<pre><code>typeorm init --name my-project --express
</code></pre>
<p>If you are using docker you can generate a <code>docker-compose.yml</code> file using:</p>
<pre><code>typeorm init --docker
</code></pre>
<p><code>typeorm init</code> is the easiest and fastest way to setup a TypeORM project.</p>
<h2 id="create-a-new-entity">Create a new entity</h2>
<p>You can create a new entity using CLI:</p>
<pre><code>typeorm entity:create -n User
</code></pre>
<p>where <code>User</code> is an entity file and class name. 
Running the command will create a new empty entity in <code>entitiesDir</code> of the project.
To setup the <code>entitiesDir</code> of the project you must add it in connection options:</p>
<pre><code>{
    cli: {
        entitiesDir: &quot;src/entity&quot;
    }
}
</code></pre>
<p>Learn more about <a href="../connection-options/">connection options</a>.
If you have a multi-module project structure with multiple entities in different directories
you can provide the path to the CLI command where you want to generate an entity:</p>
<pre><code>typeorm entity:create -n User -d src/user/entity
</code></pre>
<p>Learn more about <a href="../entities/">entities</a>.</p>
<h2 id="create-a-new-subscriber">Create a new subscriber</h2>
<p>You can create a new subscriber using CLI:</p>
<pre><code>typeorm subscriber:create -n UserSubscriber
</code></pre>
<p>where <code>UserSubscriber</code> is a subscriber file and class name. 
Running the following command will create a new empty subscriber in the <code>subscribersDir</code> of the project.
To setup <code>subscribersDir</code> you must add it in connection options:</p>
<pre><code>{
    cli: {
        subscribersDir: &quot;src/subscriber&quot;
    }
}
</code></pre>
<p>Learn more about <a href="../connection-options/">connection options</a>.
If you have a multi-module project structure with multiple subscribers in different directories
you can provide a path to the CLI command where you want to generate a subscriber:</p>
<pre><code>typeorm subscriber:create -n UserSubscriber -d src/user/subscriber
</code></pre>
<p>Learn more about <a href="../listeners-and-subscribers/">Subscribers</a>.</p>
<h2 id="create-a-new-migration">Create a new migration</h2>
<p>You can create a new migration using CLI:</p>
<pre><code>typeorm migration:create -n UserMigration
</code></pre>
<p>where <code>UserMigration</code> is a migration file and class name. 
Running the command will create a new empty migration in the <code>migrationsDir</code> of the project.
To setup <code>migrationsDir</code> you must add it in connection options:</p>
<pre><code>{
    cli: {
        migrationsDir: &quot;src/migration&quot;
    }
}
</code></pre>
<p>Learn more about <a href="../connection-options/">connection options</a>.
If you have a multi-module project structure with multiple migrations in different directories
you can provide a path to the CLI command where you want to generate a migration:</p>
<pre><code>typeorm migration:create -n UserMigration -d src/user/migration
</code></pre>
<p>Learn more about <a href="../migrations/">Migrations</a>.</p>
<h2 id="generate-a-migration-from-existing-table-schema">Generate a migration from existing table schema</h2>
<p>Automatic migration generation creates a new migration file
and writes all sql queries that must be executed to update the database.</p>
<p>If no there were no changes generated, the command will exit with code 1.</p>
<pre><code>typeorm migration:generate -n UserMigration
</code></pre>
<p>The rule of thumb is to generate a migration after each entity change.</p>
<p>Learn more about <a href="../migrations/">Migrations</a>.</p>
<h2 id="run-migrations">Run migrations</h2>
<p>To execute all pending migrations use following command:</p>
<pre><code>typeorm migration:run
</code></pre>
<p>Learn more about <a href="../migrations/">Migrations</a>.</p>
<h2 id="revert-migrations">Revert migrations</h2>
<p>To revert the most recently executed migration use the following command:</p>
<pre><code>typeorm migration:revert
</code></pre>
<p>This command will undo only the last executed migration.
You can execute this command multiple times to revert multiple migrations.
Learn more about <a href="../migrations/">Migrations</a>.</p>
<h2 id="show-migrations">Show migrations</h2>
<p>To show all migrations and whether they've been run or not use following command:</p>
<pre><code>typeorm migration:show
</code></pre>
<p>[X] = Migration has been ran</p>
<p>[ ] = Migration is pending/unapplied</p>
<p>This command also returns an error code if there are unapplied migrations.</p>
<h2 id="sync-database-schema">Sync database schema</h2>
<p>To synchronize a database schema use:</p>
<pre><code>typeorm schema:sync
</code></pre>
<p>Be careful running this command in production - 
schema sync may cause data loss if you don't use it wisely.
Check which sql queries it will run before running on production.</p>
<h2 id="log-sync-database-schema-queries-without-actual-running-them">Log sync database schema queries without actual running them</h2>
<p>To check what sql queries <code>schema:sync</code> is going to run use:</p>
<pre><code>typeorm schema:log
</code></pre>
<h2 id="drop-database-schema">Drop database schema</h2>
<p>To completely drop a database schema use:</p>
<pre><code>typeorm schema:drop
</code></pre>
<p>Be careful with this command on production since it completely removes data from your database.</p>
<h2 id="run-any-sql-query">Run any sql query</h2>
<p>You can execute any sql query you want directly in the database using:</p>
<pre><code>typeorm query &quot;SELECT * FROM USERS&quot;
</code></pre>
<h2 id="clear-cache">Clear cache</h2>
<p>If you are using <code>QueryBuilder</code> caching, sometimes you may want to clear everything stored in the cache. 
You can do it using the following command:</p>
<pre><code>typeorm cache:clear
</code></pre>
<h2 id="check-version">Check version</h2>
<p>You can check what typeorm version you have installed (both local and global) by running:</p>
<pre><code>typeorm version
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../usage-with-javascript/" class="btn btn-neutral float-left" title="Using with JavaScript"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../using-ormconfig/" class="btn btn-neutral float-right" title="Using Configuration Sources">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../usage-with-javascript/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../using-ormconfig/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
