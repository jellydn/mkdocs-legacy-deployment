<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://typeorm-legacy.productsway.com/separating-entity-definition/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Separating Entity Definition - TypeORM 0.2.38</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Separating Entity Definition";
        var mkdocs_page_input_path = "separating-entity-definition.md";
        var mkdocs_page_url = "/separating-entity-definition/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> TypeORM 0.2.38
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Documentation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../active-record-data-mapper/">Active Record vs Data Mapper</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../caching/">Caching queries</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../connection-api/">Connection APIs</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../connection-options/">Connection Options</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../connection/">Working with Connection</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../custom-repository/">Custom repositories</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../decorator-reference/">Decorators reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../delete-query-builder/">Delete using Query Builder</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../eager-and-lazy-relations/">Eager and Lazy Relations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../embedded-entities/">Embedded Entities</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../entities/">Entities</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../entity-inheritance/">Entity Inheritance</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../entity-manager-api/">`EntityManager` API</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../entity-metadata/">Entity Metadata</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../example-with-express/">Example using TypeORM with Express</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../faq/">FAQ</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../find-options/">Find Options</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../indices/">Indices</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../insert-query-builder/">Insert using Query Builder</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../internals/">Internals</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../listeners-and-subscribers/">Entity Listeners and Subscribers</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../logging/">Logging</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../many-to-many-relations/">Many-to-many relations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../many-to-one-one-to-many-relations/">Many-to-one / one-to-many relations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../migrations/">Migrations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../mongodb/">MongoDB</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../multiple-connections/">Multiple connections, databases, schemas and replication setup</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../naming-strategy/">Naming strategy</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../one-to-one-relations/">One-to-one relations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../query-runner/">Working with Query Runner</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../relational-query-builder/">Working with Relations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../relations-faq/">Relations FAQ</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../relations/">Relations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../repository-api/">Repository APIs</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../roadmap/">Roadmap</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../select-query-builder/">Select using Query Builder</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Separating Entity Definition</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#defining-schemas">Defining Schemas</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#extending-schemas">Extending Schemas</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#using-schemas-to-query-insert-data">Using Schemas to Query / Insert Data</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../sequelize-migration/">Migration from Sequelize to TypeORM</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../support/">Support</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../supported-platforms/">Supported platforms</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../transactions/">Transactions</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../tree-entities/">Tree Entities</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../update-query-builder/">Update using Query Builder</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../usage-with-javascript/">Using with JavaScript</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../using-cli/">Using CLI</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../using-ormconfig/">Using Configuration Sources</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../validation/">Using Validation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../view-entities/">View Entities</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../working-with-entity-manager/">What is EntityManager</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../working-with-repository/">What is Repository</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">TypeORM 0.2.38</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>Separating Entity Definition</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="separating-entity-definition">Separating Entity Definition</h1>
<ul>
<li><a href="#defining-schemas">Defining Schemas</a></li>
<li><a href="#extending-schemas">Extending Schemas</a></li>
<li><a href="#using-schemas-to-query--insert-data">Using Schemas</a></li>
</ul>
<h2 id="defining-schemas">Defining Schemas</h2>
<p>You can define an entity and its columns right in the model, using decorators. 
But some people prefer to define an entity and its columns inside separate files
which are called "entity schemas" in TypeORM.</p>
<p>Simple definition example:</p>
<pre><code class="language-ts">import {EntitySchema} from &quot;typeorm&quot;;

export const CategoryEntity = new EntitySchema({
    name: &quot;category&quot;,
    columns: {
        id: {
            type: Number,
            primary: true,
            generated: true
        },
        name: {
            type: String
        }
    }
});
</code></pre>
<p>Example with relations:</p>
<pre><code class="language-ts">import {EntitySchema} from &quot;typeorm&quot;;

export const PostEntity = new EntitySchema({
    name: &quot;post&quot;,
    columns: {
        id: {
            type: Number,
            primary: true,
            generated: true
        },
        title: {
            type: String
        },
        text: {
            type: String
        }
    },
    relations: {
        categories: {
            type: &quot;many-to-many&quot;,
            target: &quot;category&quot; // CategoryEntity
        }
    }
});
</code></pre>
<p>Complex example:</p>
<pre><code class="language-ts">import {EntitySchema} from &quot;typeorm&quot;;

export const PersonSchema = new EntitySchema({
    name: &quot;person&quot;,
    columns: {
        id: {
            primary: true,
            type: &quot;int&quot;,
            generated: &quot;increment&quot;
        },
        firstName: {
            type: String,
            length: 30
        },
        lastName: {
            type: String,
            length: 50,
            nullable: false
        },
        age: {
            type: Number,
            nullable: false
        }
    },
    checks: [
        { expression: `&quot;firstName&quot; &lt;&gt; 'John' AND &quot;lastName&quot; &lt;&gt; 'Doe'` },
        { expression: `&quot;age&quot; &gt; 18` }
    ],
    indices: [
        {
            name: &quot;IDX_TEST&quot;,
            unique: true,
            columns: [
                &quot;firstName&quot;,
                &quot;lastName&quot;
            ]
        }
    ],
    uniques: [
        {
            name: &quot;UNIQUE_TEST&quot;,
            columns: [
                &quot;firstName&quot;,
                &quot;lastName&quot;
            ]
        }
    ]
});
</code></pre>
<p>If you want to make your entity typesafe, you can define a model and specify it in schema definition:</p>
<pre><code class="language-ts">import {EntitySchema} from &quot;typeorm&quot;;

export interface Category {
    id: number;
    name: string;
}

export const CategoryEntity = new EntitySchema&lt;Category&gt;({
    name: &quot;category&quot;,
    columns: {
        id: {
            type: Number,
            primary: true,
            generated: true
        },
        name: {
            type: String
        }
    }
});
</code></pre>
<h2 id="extending-schemas">Extending Schemas</h2>
<p>When using the <code>Decorator</code> approach it is easy to <code>extend</code> basic columns to an abstract class and simply extend this. 
For example, your <code>id</code>, <code>createdAt</code> and <code>updatedAt</code> columns may be defined in such a <code>BaseEntity</code>. For more details, see 
the documentation on <a href="../entity-inheritance/#concrete-table-inheritance">concrete table inheritance</a>.</p>
<p>When using the <code>EntitySchema</code> approach, this is not possible. However, you can use the <code>Spread Operator</code> (<code>...</code>) to your 
advantage.</p>
<p>Reconsider the <code>Category</code> example from above. You may want to <code>extract</code> basic column descriptions and reuse it across 
your other schemas. This may be done in the following way:</p>
<pre><code class="language-ts">import {EntitySchemaColumnOptions} from &quot;typeorm&quot;;

export const BaseColumnSchemaPart = {
  id: {
    type: Number,
    primary: true,
    generated: true,
  } as EntitySchemaColumnOptions,
  createdAt: {
    name: 'created_at',
    type: 'timestamp with time zone',
    createDate: true,
  } as EntitySchemaColumnOptions,
  updatedAt: {
    name: 'updated_at',
    type: 'timestamp with time zone',
    updateDate: true,
  } as EntitySchemaColumnOptions,
};
</code></pre>
<p>Now you can use the <code>BaseColumnSchemaPart</code> in your other schema models, like this:</p>
<pre><code class="language-ts">export const CategoryEntity = new EntitySchema&lt;Category&gt;({
    name: &quot;category&quot;,
    columns: {
        ...BaseColumnSchemaPart,    
        // the CategoryEntity now has the defined id, createdAt, updatedAt columns!
        // in addition, the following NEW fields are defined
        name: {
            type: String
        }
    }
});
</code></pre>
<p>Be sure to add the <code>extended</code> columns also to the <code>Category</code> interface (e.g., via <code>export interface Category extend BaseEntity</code>).</p>
<h2 id="using-schemas-to-query-insert-data">Using Schemas to Query / Insert Data</h2>
<p>Of course, you can use the defined schemas in your repositories or entity manager as you would use the decorators.
Consider the previously defined <code>Category</code> example (with its <code>Interface</code> and <code>CategoryEntity</code> schema in order to get 
some data or manipulate the database.</p>
<pre><code class="language-ts">// request data
const categoryRepository = getRepository&lt;Category&gt;(CategoryEntity);
const category = await categoryRepository.findOne(1); // category is properly typed!

// insert a new category into the database
const categoryDTO = {
  // note that the ID is autogenerated; see the schema above
  name: 'new category',
};
const newCategory = await categoryRepository.save(categoryDTO);
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../select-query-builder/" class="btn btn-neutral float-left" title="Select using Query Builder"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../sequelize-migration/" class="btn btn-neutral float-right" title="Migration from Sequelize to TypeORM">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../select-query-builder/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../sequelize-migration/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
